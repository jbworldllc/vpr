!function(t){"use strict";t.fn.twittie=function(){var e=arguments[0]instanceof Object?arguments[0]:{},s="function"==typeof arguments[0]?arguments[0]:arguments[1],l=t.extend({username:null,list:null,hashtag:null,count:10,hideReplies:!1,dateFormat:"%b/%d/%Y",template:"{{date}} - {{tweet}}",apiPath:"api/tweet.php",loadingText:"Loading..."},e);l.list&&!l.username&&t.error("If you want to fetch tweets from a list, you must define the username of the list owner.");var r=function(e){return e.replace(/(https?:\/\/([-\w\.]+)+(:\d+)?(\/([\w\/_\.]*(\?\S+)?)?)?)/gi,'<a href="$1" target="_blank" title="Visit this link">$1</a>').replace(/#([a-zA-Z0-9_]+)/g,'<a href="https://twitter.com/search?q=%23$1&amp;src=hash" target="_blank" title="Search for #$1">#$1</a>').replace(/@([a-zA-Z0-9_]+)/g,'<a href="https://twitter.com/$1" target="_blank" title="$1 on Twitter">@$1</a>')},i=function(e){for(var t=e.split(" "),a=["January","February","March","April","May","June","July","August","September","October","November","December"],n={"%d":(e=new Date(Date.parse(t[1]+" "+t[2]+", "+t[5]+" "+t[3]+" UTC"))).getDate(),"%m":e.getMonth()+1,"%b":a[e.getMonth()].substr(0,3),"%B":a[e.getMonth()],"%y":String(e.getFullYear()).slice(-2),"%Y":e.getFullYear()},s=l.dateFormat,r=l.dateFormat.match(/%[dmbByY]/g),i=0,o=r.length;i<o;i++)s=s.replace(r[i],n[r[i]]);return s},o=function(e){for(var t=l.template,a=["id","id_str","date","tweet","avatar","url","retweeted","screen_name","user_name"],n=0,s=a.length;n<s;n++)t=t.replace(new RegExp("{{"+a[n]+"}}","gi"),e[a[n]]);return t};this.html("<span>"+l.loadingText+"</span>");var d=this;t.getJSON(l.apiPath,{action:l.action,_wpnonce:l.nonce,username:l.username,list:l.list,hashtag:l.hashtag,count:l.count,exclude_replies:l.hideReplies},function(n){null!=n.errors&&n.errors.length&&console.log(n),n&&d.find("span").fadeOut("fast",function(){d.html("<ul></ul>");for(var e=0;e<l.count;e++){var t=!1;if(n[e])t=n[e];else{if(void 0===n.statuses||!n.statuses[e])break;t=n.statuses[e]}var a={id:t.id,id_str:t.id_str,user_name:t.user.name,date:i(t.created_at),tweet:t.retweeted?r("RT @"+t.user.screen_name+": "+t.retweeted_status.text):r(t.text),avatar:'<img src="'+t.user.profile_image_url.replace("http:",window.location.protocol)+'" />',url:"https://twitter.com/"+t.user.screen_name+"/status/"+t.id_str,retweeted:t.retweeted,screen_name:r("@"+t.user.screen_name)};d.find("ul").append("<li>"+o(a)+"</li>")}"function"==typeof s&&s()})})}}(jQuery),function(e){"use strict";e.fn.list_ticker=function(s){s=e.extend({speed:4e3,effect:"slide"},s);return this.each(function(){var a=e(this),n=a.children();n.not(":first").hide(),setInterval(function(){(n=a.children()).not(":first").hide();var e=n.eq(0),t=n.eq(1);"slide"==s.effect?(e.slideUp(),t.slideDown(function(){e.remove().appendTo(a)})):"fade"==s.effect&&e.fadeOut(function(){t.fadeIn(),e.remove().appendTo(a)})},s.speed)})}}(jQuery),function(l){"use strict";l(document).ready(function(){l(".balkon-tweet").each(function(){var e=l(this),t=e.data("username"),a=e.data("list"),n=e.data("hashtag"),s=e.data("ticker"),r=e.data("count"),i=e.data("hiddenuser"),o=e.data("hiddenint");e.twittie({username:t,list:a,hashtag:n,dateFormat:"%b %d, %Y",template:'<div class="user '+i+'"><div><a href="https://twitter.com/{{user_name}}" target="_blank"><span>{{avatar}}</span></a>{{screen_name}}</div></div><p class="tweet">{{tweet}}</p><p class="timePosted"><a href="{{url}}">'+_balkon_add_ons.posted_on+'{{date}}</a></p><p class="interact '+o+'"><a href="https://twitter.com/intent/tweet?in_reply_to={{id_str}}" class="twitter_reply_icon" target="_blank">'+_balkon_add_ons.reply+'</a><a href="https://twitter.com/intent/retweet?tweet_id={{id_str}}" class="twitter_retweet_icon" target="_blank">'+_balkon_add_ons.retweet+'</a><a href="https://twitter.com/intent/favorite?tweet_id={{id_str}}" class="twitter_fav_icon" target="_blank">'+_balkon_add_ons.favorite+"</a></p>",count:r,loadingText:"Loading!",apiPath:_balkon_add_ons.url,action:"balkon_get_tweets",nonce:_balkon_add_ons.nonce,hideReplies:!1},function(){"yes"==s&&l("ul",e).list_ticker({speed:5e3,effect:"fade"})})}),l(".balkon_mailchimp-form").each(function(){var a=l(this);a.submit(function(e){e.preventDefault(),a.find(".subscribe-message").fadeIn("slow").text(_balkon_add_ons.pl_w);var t=a.serialize();t+="&action=balkon_mailchimp";l.ajax({type:"POST",data:t,url:_balkon_add_ons.url,success:function(e){if(e.success)a.find(".subscribe-message").fadeIn("slow").text(e.message);else if(a.find(".subscribe-message").fadeIn("slow").text(e.message),null!=e.last_response&&null!=e.last_response.body){var t=JSON.parse(e.last_response.body);a.find(".subscribe-message").fadeIn("slow").text(t.title)}}})})})})}(jQuery);